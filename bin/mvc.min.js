(function(){var a=false,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=true;var g=new this;a=false;for(var f in c)g[f]=typeof c[f]=="function"&&typeof e[f]=="function"&&b.test(c[f])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);this._super=c;return d}}(f,c[f]):c[f];d.prototype=g;d.prototype.constructor=d;d.extend=arguments.callee;
return d}})();
(function(){window.Event=new (Class.extend({_eventMap:[],init:function(){},bind:function(a,b,c){var d=b.toString(),e=this._eventMap[a]?this._eventMap[a]:{};e[d]||(e[d]={callback:b,context:c?c:null});this._eventMap[a]=e},unbind:function(a,b){var c=b.toString(),d=this._eventMap[a]?this._eventMap[a]:{};d[c]&&delete d[c];this._eventMap[a]=d},unbindAll:function(){this._eventMap=[]},trigger:function(a,b,c){var d=this._eventMap[a];if(d){var e=[{type:a,data:{}}],g;for(g in d)d[g].callback.apply(c?c:d[g].context,
b?[{type:a,data:b}]:e)}},willTrigger:function(a,b){return(this._eventMap[a]?this._eventMap[a]:{})[b.toString()]!=null}}))})(window);
(function(){window.Model=new (Class.extend({_proxyMap:{},_serviceMap:{},init:function(){},addProxy:function(a){if(this.hasProxy(a.getName()))throw"Proxy already added under the name "+a.getName();this._proxyMap[a.getName()]=a;a.added()},getProxy:function(a){return this._proxyMap[a]},hasProxy:function(a){return this._proxyMap[a]!=null},removeProxy:function(a){var b=this.getProxy(a);b&&(b.removed(),delete this._proxyMap[a]);return b},removeAllProxies:function(){for(var a in this._proxyMap)this.removeProxy(a);
this._proxyMap={}},addService:function(a){if(this.hasService(a.getName()))throw"Service already added under the name "+a.getName();this._serviceMap[a.getName()]=a;a.added()},getService:function(a){return this._serviceMap[a]},hasService:function(a){return this._serviceMap[a]!=null},removeService:function(a){var b=this.getService(a);b&&(b.removed(),delete this._serviceMap[a]);return b},removeAllServices:function(){for(var a in this._serviceMap)this.removeService(a);this._serviceMap={}}}))})(window);
(function(){window.View=new (Class.extend({_mediatorMap:{},init:function(){},addMediator:function(a){if(this.hasMediator(a.getName()))throw"Mediator already added under the name "+a.getName();this._mediatorMap[a.getName()]=a;a.added()},getMediator:function(a){return this._mediatorMap[a]},hasMediator:function(a){return this._mediatorMap[a]!=null},removeMediator:function(a){var b=this.getMediator(a);b&&(b.removed(),delete this._mediatorMap[a]);return b},removeAllMediators:function(){for(var a in this._mediatorMap)this.removeMediator(a);
this._mediatorMap={}}}))})(window);
(function(){window.Controller=new (Class.extend({_commandMap:[],init:function(){},bind:function(a,b){var c=this.getCommandsByEventType(a);c.indexOf(b)==-1&&(Event.bind(a,this._onEventTriggered,this),c.push(b));this._commandMap[a]=c},unbind:function(a,b){var c=this.getCommandsByEventType(a),d=c.indexOf(b);d!=-1&&(c.splice(d,1),c.length||Event.unbind(a,this._onEventTriggered));this._commandMap[a]=c},execute:function(a,b){var c=typeof a.execute=="function"?a:new a;typeof c.execute=="function"&&c.execute.apply(c,
[b])},getCommandsByEventType:function(a){return this._commandMap[a]?this._commandMap[a]:[]},_onEventTriggered:function(a){var b=this.getCommandsByEventType(a.type),c;for(c in b)this.execute(b[c],a)}}))})(window);
(function(){window.Bootstrap=Class.extend({initialized:function(){return this._initialized},_initialized:false,init:function(a){this.defineModel();this.defineView();this.defineController();this._initialized=true;(a==void 0||a&&a.toString().toLowerCase()=="true")&&this.startup()},startup:function(){Event.trigger(Bootstrap.STARTUP)},defineModel:function(){},defineView:function(){},defineController:function(){}})})(window);
(function(){window.ModuleManager=new (Class.extend({_moduleMap:{},_currentContext:null,init:function(){},add:function(a){if(this.has(a.getName()))throw"Module already added under the name "+mediator.getName();this._moduleMap[a.getName()]=a},get:function(a){return this._moduleMap[a]},has:function(a){return this._moduleMap[a]!=null},remove:function(a){var b=this.get(a);b&&(b.isActive()&&b.deactivate(),this._moduleMap[a]=null);return b},removeAll:function(){for(var a in this._moduleMap)this.remove(a);
this._moduleMap={}},trigger:function(a){this._currentContext=a;for(var b in this._moduleMap){var c=this._moduleMap[b];c.validate(a)&&!c.isActive()?c.activate():!c.validate(a)&&c.isActive()&&c.deactivate()}}}))})(window);
(function(){window.Router=new (Class.extend({getRouteMap:function(){return this._routeMap},isActive:function(){return this._active},_active:null,_history:null,_routeMap:[],init:function(){this._active=false;this._history=window.History;this.defineEventModel()},defineEventModel:function(){this._history.Adapter.bind(window,"statechange",this._onStateChange)},activate:function(a){this._active=true;a&&this._onStateChange()},deactivate:function(){this._active=false},getState:function(){return this._history.getState()},
reset:function(){this._routeMap=[]},add:function(a,b){if(!a.test||typeof a.test!="function")throw"Route "+a+" is not added as a regular expression!";var c={route:a,eventType:b};this._routeMap.push(c);return c},navigate:function(a){this._history.pushState({},null,a)},trigger:function(a){var b=false,c;for(c in this._routeMap){var d=this._routeMap[c];if(d.route.test(a)){b=true;Event.trigger(d.eventType,this._history.getState());break}}return b},_onStateChange:function(){this._active&&Router.trigger(this._history.getState().url)}}))})(window);
(function(){window.Proxy=Class.extend({getName:function(){return this._name},getData:function(){return this._data},setData:function(a){this._data=a},_name:null,_data:null,init:function(a,b){this._name=a;this.setData(b)},added:function(){},removed:function(){}})})(window);(function(){window.Service=Class.extend({getName:function(){return this._name},_name:null,init:function(a){this._name=a},added:function(){},removed:function(){}})})(window);
(function(){window.Mediator=Class.extend({getName:function(){return this._name},getElement:function(){return this._element},setElement:function(a){this._element=a},isActive:function(){return this._active},_name:null,_element:null,_active:false,init:function(a,b){this._name=a;this.setElement(b)},activate:function(){this._active=true;this.activated()},deactivate:function(){this._active=false;this.deactivated()},activated:function(){},deactivated:function(){},added:function(){},removed:function(){}})})(window);
(function(){window.Command=Class.extend({init:function(){},execute:function(){}})})(window);(function(){window.MacroCommand=Command.extend({_subCommands:[],init:function(){this.addSubCommands()},execute:function(a){for(;this._subCommands.length;)Controller.execute(this._subCommands.shift(),a)},addSubCommands:function(){},addSubCommand:function(a){this._subCommands.push(a)}})})(window);
(function(){window.ASyncCommand=Class.extend({setOnComplete:function(a,b){this._onComplete=a;this._onCompleteContext=b},_onComplete:null,_onCompleteContext:null,commandComplete:function(){this._onComplete&&this._onComplete.apply(this._onCompleteContext)}})})(window);
(function(){window.ASyncMacroCommand=Class.extend({setOnComplete:function(a,b){this._onComplete=a;this._onCompleteContext=b},_onComplete:null,_onCompleteContext:null,_subCommands:[],_event:null,init:function(){this.addSubCommands()},execute:function(a){this._event=a;this.executeNextCommand()},executeNextCommand:function(){if(this._subCommands.length){var a=new (this._subCommands.shift()),b=a instanceof ASyncCommand;b&&a.setOnComplete(this.executeNextCommand,this);Controller.execute(a,this._event);
b||this.executeNextCommand()}else this._onComplete&&this._onComplete.apply(this,this._onCompleteContext),this._onComplete=null},addSubCommands:function(){},addSubCommand:function(a){this._subCommands.push(a)}})})(window);
(function(){window.Module=Class.extend({getName:function(){return this._name},isActive:function(){return this._active},_name:null,_mediatorNames:[],_active:false,init:function(a,b){this._name=a;this._mediatorNames=b?b:[]},validate:function(){return false},activate:function(){this._active=true;for(var a in this._mediatorNames){var b=this._mediatorNames[a];View.hasMediator(b)&&(b=View.getMediator(b),b.isActive()||b.activate())}},deactivate:function(){this._active=false;for(var a in this._mediatorNames){var b=
this._mediatorNames[a];View.hasMediator(b)&&(b=View.getMediator(b),b.isActive()&&b.deactivate())}},getMediatorNames:function(){return this._mediatorNames}})})(window);